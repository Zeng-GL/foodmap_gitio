(function(t){function e(e){for(var a,s,u=e[0],i=e[1],c=e[2],p=0,f=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,u=1;u<r.length;u++){var i=r[u];0!==n[i]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/foodmap_frontend/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=i;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"39cd":function(t,e,r){},"46b1":function(t,e,r){"use strict";r("39cd")},"46eb":function(t,e,r){"use strict";r("7ca4")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],s=r("2877"),u={},i=Object(s["a"])(u,n,o,!1,null,null,null),c=i.exports,l=r("8c4f"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Main")],1)},f=[],d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"container-fluid",attrs:{fluid:""}},[r("v-row",[r("Map",{attrs:{restaurants:t.restaurants}}),r("Information",{attrs:{restaurants:t.restaurants}})],1)],1)},m=[],v=r("1da1"),h=(r("96cf"),r("bc3a")),b=r.n(h),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-col",{attrs:{cols:"12",sm:"9",md:"9",bg:"9"}},[r("div",{staticClass:"map-box"},[r("div",{ref:"map-root",attrs:{id:"map"}},[r("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[r("a",{staticClass:"ol-popup-closer",attrs:{id:"popup-closer"},on:{click:t.closePopup}}),r("div",{attrs:{id:"popup-content"}})])])])])},w=[],g=(r("d81d"),r("b0c0"),r("5bc0"),r("d0e9")),_=r("5eee"),O=r("a2c7"),x=r("480c"),P=r("3e6b"),j=r("5831"),S=r("4cdf"),k=r("6c77"),M=r("6cbf"),E=r("f403"),C=r("256f"),L=r("0710"),$={name:"Map",props:{restaurants:{type:Array,required:!0}},data:function(){return{map:null,view:null,markerLayer:null,markerSource:null,overlay:null}},methods:{initMap:function(){var t=this,e=document.getElementById("popup"),r=document.getElementById("popup-content");this.overlay=new L["a"]({element:e,autoPan:!0,autoPanAnimation:{duration:250}}),this.view=new O["a"]({center:Object(C["e"])([121.53670561802547,25.04477682002577]),zoom:12}),this.map=new _["a"]({target:this.$refs["map-root"],layers:[new x["a"]({source:new g["a"],opacity:1})],view:this.view}),this.markerSource=new j["a"],this.markerLayer=new P["a"]({source:this.markerSource,style:new k["b"]({image:new M["a"]({anchor:[.5,1],src:"https://i.imgur.com/wXxeCFR.png",scale:.5})})}),this.map.addLayer(this.markerLayer),this.addSellrestaurant(),this.map.on("click",(function(e){var a=t.map.forEachFeatureAtPixel(e.pixel,(function(t){var e=t.values_.geometry.flatCoordinates,r=Object(C["q"])(e,"EPSG:3857","EPSG:4326");return t.reverse_coords={lat:r[1],lng:r[0]},t}));a?(r.innerHTML="<span class='popup-text'>餐廳名字:</span>"+a.values_.name+"<br><span class='popup-text'>餐廳地址:</span>"+a.values_.location+"<br><span class='popup-text'>推薦美食:</span>"+a.values_.food,r.classList.add("popup-text"),t.overlay.setPosition(a.getGeometry().getCoordinates()),t.map.addOverlay(t.overlay)):t.overlay.setPosition(void 0)}))},createSellrestaurant:function(t,e,r,a,n){return new S["a"]({geometry:new E["a"](Object(C["q"])([e,t],"EPSG:4326","EPSG:3857")),name:r,location:a,food:n})},addSellrestaurant:function(){try{for(var t=0;t<this.restaurants.length;t++)this.markerLayer.getSource().addFeature(this.createSellrestaurant(this.restaurants[t].lat,this.restaurants[t].lng,this.restaurants[t].name,this.restaurants[t].location,this.restaurants[t].food))}catch(e){console.log(e)}},closePopup:function(){var t=document.getElementById("popup-closer");return this.overlay.setPosition(void 0),t.blur(),!1}},watch:{restaurants:function(){this.initMap()}}},A=$,G=(r("e310"),Object(s["a"])(A,y,w,!1,null,"085bcc7c",null)),I=G.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-col",{attrs:{cols:"12",sm:"3",md:"3",bg:"3"}},t._l(t.restaurants,(function(e){return r("v-card",{key:e.id,staticClass:"restaurant-info-card"},[r("h3",[t._v(t._s(e.name))]),r("p",[t._v("餐廳地址:"+t._s(e.location))]),r("p",[t._v("推薦美食:"+t._s(e.food))])])})),1)},q=[],T={name:"Map",props:{restaurants:{type:Array,required:!0}}},B=T,F=(r("46b1"),Object(s["a"])(B,R,q,!1,null,"29975685",null)),H=F.exports,J={name:"Main",components:{Map:I,Information:H},data:function(){return{restaurants:[]}},methods:{getAllRestaurants:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.a.get("https://foodmap99.herokuapp.com/api/restaurant").then((function(e){t.restaurants=e.data}));case 1:case"end":return e.stop()}}),e)})))()}},created:function(){this.getAllRestaurants()}},z=J,X=(r("46eb"),Object(s["a"])(z,d,m,!1,null,"ebab0b0c",null)),D=X.exports,K={name:"Home",components:{Main:D}},N=K,Q=Object(s["a"])(N,p,f,!1,null,null,null),U=Q.exports;a["default"].use(l["a"]);var V=[{path:"/",name:"Home",component:U}],W=new l["a"]({mode:"history",base:"/foodmap_frontend/",routes:V}),Y=W,Z=r("2f62");a["default"].use(Z["a"]);var tt=new Z["a"].Store({state:{},mutations:{},actions:{},modules:{}}),et=r("ce5b"),rt=r.n(et);r("bf40");a["default"].use(rt.a);var at={},nt=new rt.a(at);a["default"].config.productionTip=!1,new a["default"]({router:Y,store:tt,vuetify:nt,render:function(t){return t(c)}}).$mount("#app")},"7ca4":function(t,e,r){},e310:function(t,e,r){"use strict";r("fad1")},fad1:function(t,e,r){}});
//# sourceMappingURL=app.f3b3992b.js.map