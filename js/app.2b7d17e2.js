(function(t){function e(e){for(var r,s,u=e[0],i=e[1],c=e[2],p=0,f=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,u=1;u<a.length;u++){var i=a[u];0!==n[i]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},n={app:0},o=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/foodmap_gitio/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=i;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"39cd":function(t,e,a){},"46b1":function(t,e,a){"use strict";a("39cd")},"46eb":function(t,e,a){"use strict";a("7ca4")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],s=a("2877"),u={},i=Object(s["a"])(u,n,o,!1,null,null,null),c=i.exports,l=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Main")],1)},f=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"container-fluid",attrs:{fluid:""}},[a("v-row",[a("Map",{attrs:{restaurants:t.restaurants}}),a("Information",{attrs:{restaurants:t.restaurants}})],1)],1)},m=[],v=a("1da1"),h=(a("96cf"),a("bc3a")),b=a.n(h),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"9",md:"9",bg:"9"}},[a("div",{staticClass:"map-box"},[a("div",{ref:"map-root",attrs:{id:"map"}},[a("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[a("a",{staticClass:"ol-popup-closer",attrs:{id:"popup-closer"},on:{click:t.closePopup}}),a("div",{attrs:{id:"popup-content"}})])])])])},g=[],w=(a("d81d"),a("b0c0"),a("5bc0"),a("d0e9")),_=a("5eee"),O=a("a2c7"),x=a("480c"),P=a("3e6b"),j=a("5831"),S=a("4cdf"),k=a("6c77"),M=a("6cbf"),E=a("f403"),C=a("256f"),L=a("0710"),$={name:"Map",props:{restaurants:{type:Array,required:!0}},data:function(){return{map:null,view:null,markerLayer:null,markerSource:null,overlay:null}},methods:{initMap:function(){var t=this,e=document.getElementById("popup"),a=document.getElementById("popup-content");this.overlay=new L["a"]({element:e,autoPan:!0,autoPanAnimation:{duration:250}}),this.view=new O["a"]({center:Object(C["e"])([121.53670561802547,25.04477682002577]),zoom:12}),this.map=new _["a"]({target:this.$refs["map-root"],layers:[new x["a"]({source:new w["a"],opacity:1})],view:this.view}),this.markerSource=new j["a"],this.markerLayer=new P["a"]({source:this.markerSource,style:new k["b"]({image:new M["a"]({anchor:[.5,1],src:"https://i.imgur.com/wXxeCFR.png",scale:.5})})}),this.map.addLayer(this.markerLayer),this.addSellrestaurant(),this.map.on("click",(function(e){var r=t.map.forEachFeatureAtPixel(e.pixel,(function(t){var e=t.values_.geometry.flatCoordinates,a=Object(C["q"])(e,"EPSG:3857","EPSG:4326");return t.reverse_coords={lat:a[1],lng:a[0]},t}));r?(a.innerHTML="<span class='popup-text'>餐廳名字:</span>"+r.values_.name+"<br><span class='popup-text'>餐廳地址:</span>"+r.values_.location+"<br><span class='popup-text'>推薦美食:</span>"+r.values_.food,a.classList.add("popup-text"),t.overlay.setPosition(r.getGeometry().getCoordinates()),t.map.addOverlay(t.overlay)):t.overlay.setPosition(void 0)}))},createSellrestaurant:function(t,e,a,r,n){return new S["a"]({geometry:new E["a"](Object(C["q"])([e,t],"EPSG:4326","EPSG:3857")),name:a,location:r,food:n})},addSellrestaurant:function(){try{for(var t=0;t<this.restaurants.length;t++)this.markerLayer.getSource().addFeature(this.createSellrestaurant(this.restaurants[t].lat,this.restaurants[t].lng,this.restaurants[t].name,this.restaurants[t].location,this.restaurants[t].food))}catch(e){console.log(e)}},closePopup:function(){var t=document.getElementById("popup-closer");return this.overlay.setPosition(void 0),t.blur(),!1}},watch:{restaurants:function(){this.initMap()}}},A=$,G=(a("e310"),Object(s["a"])(A,y,g,!1,null,"085bcc7c",null)),I=G.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"3",md:"3",bg:"3"}},t._l(t.restaurants,(function(e){return a("v-card",{key:e.id,staticClass:"restaurant-info-card"},[a("h3",[t._v(t._s(e.name))]),a("p",[t._v("餐廳地址:"+t._s(e.location))]),a("p",[t._v("推薦美食:"+t._s(e.food))])])})),1)},q=[],T={name:"Map",props:{restaurants:{type:Array,required:!0}}},B=T,F=(a("46b1"),Object(s["a"])(B,R,q,!1,null,"29975685",null)),H=F.exports,J={name:"Main",components:{Map:I,Information:H},data:function(){return{restaurants:[]}},methods:{getAllRestaurants:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.a.get("https://foodmap99.herokuapp.com/api/restaurant").then((function(e){t.restaurants=e.data}));case 1:case"end":return e.stop()}}),e)})))()}},created:function(){this.getAllRestaurants()}},z=J,X=(a("46eb"),Object(s["a"])(z,d,m,!1,null,"ebab0b0c",null)),D=X.exports,K={name:"Home",components:{Main:D}},N=K,Q=Object(s["a"])(N,p,f,!1,null,null,null),U=Q.exports;r["default"].use(l["a"]);var V=[{path:"/",name:"Home",component:U}],W=new l["a"]({mode:"hash",base:"/foodmap_gitio/",routes:V}),Y=W,Z=a("2f62");r["default"].use(Z["a"]);var tt=new Z["a"].Store({state:{},mutations:{},actions:{},modules:{}}),et=a("ce5b"),at=a.n(et);a("bf40");r["default"].use(at.a);var rt={},nt=new at.a(rt);r["default"].config.productionTip=!1,new r["default"]({router:Y,store:tt,vuetify:nt,render:function(t){return t(c)}}).$mount("#app")},"7ca4":function(t,e,a){},e310:function(t,e,a){"use strict";a("fad1")},fad1:function(t,e,a){}});
//# sourceMappingURL=app.2b7d17e2.js.map